# 注释添加计划（符合：表情 + 功能名 + 行号，次行作用）

## 注释风格规范
- TS/TSX 逻辑使用两行相邻行注释：
  - 第 1 行：`// 🧩 功能名（第X–Y行）`
  - 第 2 行：`// 作用简要说明`
- JSX 结构使用两行相邻的内联注释：
  - 第 1 行：`{/* 🧩 功能名（第X–Y行） */}`
  - 第 2 行：`{/* 作用简要说明 */}`
- 行号按当前文件展示的行号标注；简洁、统一术语；不做逐行解释。

## 模块与计划插入的注释（含行号与示例）
```tsx
// 📦 基础导入与类型（第1–10行）
// 引入组件与工具函数，并定义消息类型

// 🧠 状态与引用初始化（第11–35行）
// 管理聊天、简历数据、预览/编辑模式与导出/分栏相关引用

// ⚖️ 分栏比例限制（第36行）
// 将左栏比例限制在 30%–50% 之间

// 🎞️ rAF 更新列宽（第38–47行）
// 在下一帧平滑更新 grid 列宽，避免频繁重排

// 🖱️ 拖拽移动回调（第49–55行）
// 计算拖拽位移并调度分栏宽度更新

// 🖱️ 拖拽结束回调（第56–67行）
// 结束拖拽，释放事件与指针捕获，提交最终比例

// 🖱️ 拖拽开始回调（第68–78行）
// 记录初始位置/比例，设置光标并绑定事件

// ⌨️ 键盘调整比例（第80–92行）
// 通过左右箭头以 1% 步长调整分栏比例

// 🪟 导出菜单外部点击关闭（第94–109行）
// 监听文档点击，非菜单区域点击时关闭导出菜单

// 💾 启动时加载持久化（第111–129行）
// 从 localStorage 恢复消息、简历、编辑模式与 Markdown

// 💾 状态变化持久化（第131–135行）
// 将核心 UI 状态写入 localStorage 的 ra_state

// 🔄 简历数据联动更新（第136–142行）
// 简历数据变化时生成 HTML/Markdown，并切至预览

// 🔀 编辑模式切换同步（第144–151行）
// 进入编辑模式时用当前简历生成 Markdown 文本

{/* 🧱 顶层容器布局（第153–158行） */}
{/* 使用 CSS Grid 控制左右栏比例并挂载容器 ref */}

{/* 💬 左栏聊天区（第159–167行） */}
{/* 展示对话并传递消息与简历的状态与更新方法 */}

{/* ↔️ 分隔条与可访问性（第168–178行） */}
{/* 分隔条的 ARIA 属性与拖拽/键盘交互入口 */}

{/* 📄 右栏标题与工具区（第180–205行） */}
{/* 右栏标题、模式切换单选组与导出菜单触发按钮 */}

{/* 📤 导出按钮（第205–229行） */}
{/* 带 ARIA 的导出按钮与图标，仅用于展开菜单 */}

{/* 🧾 导出菜单项（第230–253行） */}
{/* 点击后调用 exportResume 导出为 pdf 或 html 并关闭菜单 */}

{/* 👀 条件渲染编辑/预览（第256–260行） */}
{/* 根据编辑器模式显示 MarkdownPane 或 ResumePreview */}
```

## 实施步骤
- 按上述模块在对应行前插入两行注释（TS 用 `//`，JSX 用 `{/* */}`）。
- 统一术语与表情，确保模块边界清晰，注释长度 1–2 行。
- 仅添加注释，不改动任何逻辑；检查编译通过。

## 验证方式
- 运行构建与类型检查，确认无语法问题。
- 目检注释位置与行号是否与模块边界一致。

## 交付内容
- 已完成上述注释风格的 `web/src/App.tsx`，每个模块 2 行注释、含表情与行号。