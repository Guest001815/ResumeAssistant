# 后端架构分析计划

我将基于代码库的现状，为您提供一份详细的图文并茂的后端架构分析报告。

## 分析内容

### 1. 整体架构概览 (High-Level Architecture)
- **架构模式**: 基于 FastAPI 的 Web 服务 + Orchestrator 编排模式 + 多 Agent 协作。
- **核心组件**: API 层、编排器 (Orchestrator)、Agent 层 (Plan/Guide/Editor)、状态管理 (WorkflowState)、数据存储。

### 2. 核心组件详解
- **API 层 (`api.py`)**: 负责 HTTP 请求处理、路由分发、SSE 流式响应。
- **编排器 (`orchestrator.py`)**: 系统的核心大脑，负责调度 Agent、管理工作流转、处理路由规则。
- **Agent 层 (`base_agent.py`, `agent_adapters.py`)**:
    - **Plan Agent**: 负责诊断简历并生成优化计划。
    - **Guide Agent**: 负责与用户交互，引导修改，生成草稿。
    - **Editor Agent**: 负责执行具体的简历修改操作。
- **状态管理 (`workflow_state.py`)**: 管理会话状态、任务进度、上下文信息。

### 3. 数据流与工作流 (Workflows)
- **会话创建与简历解析流程**
- **计划生成流程**
- **交互引导与草稿生成流程**
- **确认与执行流程**

### 4. 关键技术栈
- **Web 框架**: FastAPI
- **异步处理**: Async/Await, SSE (Server-Sent Events)
- **AI 集成**: OpenAI API (推测), PyMuPDF (PDF 处理)
- **数据模型**: Pydantic

## 交付形式
- **文字说明**: 详细解释每个模块的作用和交互方式。
- **架构图**: 使用 Mermaid 绘制系统架构图、状态流转图和时序图，直观展示系统运作机制。
