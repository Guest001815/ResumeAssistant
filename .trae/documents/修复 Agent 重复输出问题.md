## 可以，仅调整提示词
- 通过强化系统提示词约束回合结构与反复行为，可在不改代码的情况下显著减少“重复 think”。

## 修改要点（插入到 `_get_system_prompt`）
1. 单次思考限制：
   - “每一轮回复只能调用一次 `think`；禁止同轮多次 `think`。”
2. 必须伴随功能工具：
   - “`think` 之后必须紧跟且仅能选择一个功能性工具（编辑类工具/`askHuman`/`stop`）；禁止只调用 `think`。”
3. 反重复要求：
   - “必须参考上一轮 `messages`；若本轮 `reasoning` 与上一轮高度相似，请浓缩为一句话并推进下一步（选择功能工具或提问），不得原样重复。”
4. 信息不足的默认策略：
   - “当信息不足以安全执行编辑类工具时，优先选择 `askHuman` 并提出 2-3 个精确问题（按 STAR 法则组织）。”
5. 结束条件：
   - “当工作完成时，请选择 `stop`，不得在完成后继续调用 `think`。”
6. 负例与正例（范式）：
   - 负例：只输出 `think`；本项目判为错误。
   - 正例：`think`（简述差异与决策） → `askHuman`（提出 3 个具体问题）。

## 这样做的效果
- 在 `tool_choice="required"` 下，模型会遵循“`think` + 功能工具”的结构，不再只调用 `think`。
- 当缺信息时，模型会选择 `askHuman` 而非重复 `think`，自然打断重复。

## 风险与折中
- 仍存在小概率重复（温度为 0 时上下文不变会趋于同构），但通过“反重复要求”可大幅缓解。
- 若需要彻底杜绝，仍建议后续配合小幅度代码约束（单轮去重与正常分支 `break`）。

## 验证方法
- 用当前输入执行一轮：预期出现一次 `think`，随后是 `askHuman` 或具体编辑工具；不再出现多次 `think`。