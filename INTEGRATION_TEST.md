# 前后端联调测试指南

## 服务状态

### 后端服务
- **地址**: http://localhost:8001
- **健康检查**: http://localhost:8001/health
- **API文档**: http://localhost:8001/docs
- **状态**: ✅ 运行中

### 前端服务
- **地址**: http://localhost:5178
- **状态**: ✅ 运行中

## 测试流程

### 1. PDF上传测试

#### 步骤：
1. 打开浏览器访问 http://localhost:5178
2. 在Landing Page上选择"上传PDF"模式
3. 上传一个PDF简历文件
4. 在职位描述框输入JD（例如："我想申请Python后端工程师职位"）
5. 点击"开始优化"

#### 预期结果：
- PDF开始解析，显示加载动画
- 解析成功后进入工作区
- 自动创建会话并生成任务计划
- 显示任务进度面板（顶部）
- 聊天区域显示第一个任务的说明

### 2. 手动输入测试

#### 步骤：
1. 在Landing Page选择"手动输入"模式
2. 粘贴简历文本内容，例如：
```
张三
邮箱: zhangsan@example.com
电话: 138****1234

工作经历：
2020-2023 ABC公司 - Python开发工程师
- 负责后端API开发
- 使用Django框架开发RESTful API
- 参与数据库设计和优化

项目经验：
电商平台后端系统
- 使用Python + Django + PostgreSQL
- 实现用户认证、订单管理等功能
```
3. 输入JD："我想申请高级Python后端工程师职位，要求有微服务架构经验"
4. 点击"开始优化"

#### 预期结果：
- 立即进入工作区
- 创建会话并生成任务计划
- 显示任务列表和当前任务

### 3. Guide Agent交互测试

#### 步骤：
1. 进入工作区后，阅读第一个任务的诊断信息
2. 在输入框回答Guide的问题，例如：
   - "我在ABC公司主要负责用户系统和订单系统的开发"
   - "我使用过Redis做缓存，MySQL做主数据库"
3. 继续对话，直到Guide生成草稿

#### 预期结果：
- 每次输入后，Guide返回回复或继续提问
- 最终生成优化草稿，显示在蓝色卡片中
- 出现"确认执行"和"跳过"按钮

### 4. Editor Agent执行测试

#### 步骤：
1. 查看草稿预览
2. 点击"确认执行"按钮

#### 预期结果：
- 显示执行日志（黄色区域）
- SSE流式返回执行过程
- 执行完成后简历预览自动更新
- 自动进入下一个任务

### 5. 任务管理测试

#### 跳过任务：
1. 在任务进度面板点击"跳过"按钮
2. 或在聊天中点击"跳过"按钮

#### 预期结果：
- 当前任务标记为"已跳过"（灰色）
- 自动进入下一个任务

#### 下一任务：
1. 完成当前任务后，点击"下一个"按钮

#### 预期结果：
- 进入下一个任务
- 任务面板更新状态

### 6. 简历预览和导出测试

#### 步骤：
1. 在右侧简历预览区域查看实时更新
2. 切换"编辑"和"预览"模式
3. 点击导出按钮，选择PDF或HTML

#### 预期结果：
- 简历实时显示修改内容
- 编辑模式显示Markdown
- 预览模式显示渲染后的HTML
- 导出功能正常工作

## 常见问题排查

### PDF解析失败
**症状**: 上传PDF后显示错误
**解决方案**:
1. 检查后端日志，确认API调用成功
2. 检查parse_resume.py中的API_KEY是否有效
3. 尝试使用"手动输入"模式作为备选

### 会话创建失败
**症状**: 点击"开始优化"后无响应
**解决方案**:
1. 打开浏览器开发者工具（F12）查看Console错误
2. 检查Network标签，确认API请求状态
3. 确认后端服务正常运行（访问 /health）

### 任务列表不显示
**症状**: 进入工作区后没有任务面板
**解决方案**:
1. 检查Plan Agent是否成功生成计划
2. 查看浏览器Console是否有错误
3. 检查后端 /session/{id}/plan 端点响应

### SSE流断开
**症状**: 执行时卡住或中断
**解决方案**:
1. 检查网络连接
2. 查看后端日志中的错误信息
3. 刷新页面重新开始

## API端点测试

可以使用curl或Postman测试各个端点：

### 健康检查
```bash
curl http://localhost:8001/health
```

### 创建会话
```bash
curl -X POST http://localhost:8001/session/create \
  -H "Content-Type: application/json" \
  -d '{"resume": {"basics": {"name": "测试"}, "sections": []}}'
```

### 生成计划
```bash
curl -X POST http://localhost:8001/session/{session_id}/plan \
  -H "Content-Type: application/json" \
  -d '{"user_intent": "优化简历"}'
```

## 测试数据

可以使用 `testCase/刘锦文的简历 (4)_json.json` 作为测试数据。

## 成功标准

✅ 完整流程测试通过的标志：
1. 用户能成功上传PDF或输入文本
2. 系统自动生成3-5个优化任务
3. 每个任务都能与Guide Agent对话
4. 能查看草稿并确认执行
5. Editor Agent成功修改简历
6. 简历预览实时更新
7. 能完成所有任务或跳过
8. 最终能导出优化后的简历

## 下一步优化

完成基本测试后，可以考虑：
1. 添加错误边界和友好的错误提示
2. 优化加载状态和动画
3. 添加localStorage持久化（可选）
4. 改进移动端响应式布局
5. 添加更多的用户引导提示

